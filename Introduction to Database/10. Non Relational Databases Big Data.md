### Non Relational Databases Big Data
- Big Data Characteristics
  - Volume
    - The quantity of data to be stored
      - Scaling up: keeping the same number of systems but migrating each one to a larger system
      - Scaling out: when the workload exceeds server capacity, it is spread out across a number of servers
  - Velocity
    - The speed at which data enters the system and must be processed
    - Stream processing: focuses on input processing and requires analysis of data stream as it enters the system
      - CERN Large Hadron Collider 600TB per second 1 GB per second
    - Feedback loop processing: analysis of data to produce actionable results
  - Variety
    - Variations in the structure of the data to be stored
    - Structured data: fits into a predefined data model
      - Relational databases
      - Incoming data decomposed under normalisation rules to fit the data model
    - Unstructured data: does not fit into a predefined model
      - Big Data requires that the data is captured in its natural format as generated without imposing a data model on it
    - Semi structured data: combines elements of both 
- Scaling
  - How do we scale current relational systems? SQL designed for database as a single physical entity
    - Purchase bigger "boxes": costly and has real limits
    - Increase the number of processors, yielding parallel computation/database with complex issues to handle
    - Distribute database – challenges to maintain ACID transaction principles and issues of availability/consistency
  - The rise of OO programming in the 80's also highlighted a problem known as the "Impedance Mismatch"
    - The program treats items as objects, but they need to be mapped to relational tables ("de aggregating" the object)
    - Also issues about "private" vs "public" (relational about need, OO absolute characteristic of data)
  - Big players, notably Google and Amazon chose a different path
    - Lots and lots of smaller boxes ("commodity" servers)
    - Non relational structure
    - Google: Bigtable
      - https://research.google/pubs/pub27898/
      - https://cloud.google.com/bigtable/docs/overview
      - Used for wide range of apps Gmail, Google Earth, YouTube
    - Amazon: Dyanmo
      - http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf
      - Based on Dynamo: https://aws.amazon.com/dynamodb/
  - Term "NoSQL" coined by John Oskarsson in 2009 after calling a ..."free meetup about “open source, distributed, non relational databases” or NOSQL for short"…
    - http://blog.oskarsson.nu/post/22996139456/nosql-meetup
  - Characteristics
    - Non relational,
    - mostly open source,
    - distributed (cluster friendly),
    - schema-less (no fixed storage schema)
- Hadoop
  - Hadoop is not a database
    - De facto standard for most Big Data storage and processing
    - Java-based framework for distributing and processing very large data sets across clusters of computers
    - https://www.geeksforgeeks.org/hadoop-ecosystem/
  - Important components
    - Hadoop Distributed File System (HDFS): low-level distributed file processing system that can be used directly for data storage
    - MapReduce: programming model that supports processing large data sets
  - Hadoop Distributed File System (HDFS)
    - Based on several key assumptions
      - High volume: default block sizes is 64 MB (cf Oracle RDBMS 4K or 8K) and can be configured to even larger values
      - Write-once, read-many: model simplifies concurrency issues and improves data throughput
      - Streaming access: optimized for batch processing of entire files as a continuous stream of data
      - Fault tolerance: designed to replicate data across many different devices so that when one fails, data is still available from another device
  - Hadoop uses several types of nodes; computers that perform one or more types of tasks within the system – Data node store the actual file data – Name node contains file system metadata
    - Client node makes requests to the file system as needed to support user applications
    - Data node communicates with name node and send back block reports and heartbeats
  - MapReduce
    - Framework used to process large data sets across clusters
      - Breaks down complex tasks into smaller subtasks, performing the subtasks, and producing a final result
      - Map function takes a collection of data and sorts and filters it into a set of key-value pairs
        - Mapper program performs the map function
      - Reduce summaries results of map function produce a single result
        - Reducer program performs the reduce function
- NoSQL Data Models
  - Key-value store
    - Each item stored consists of a key and value pair (the value may be a numeric, a document, an image etc)
    - Oracle NoSQL database (community edition available)
      - https://www.oracle.com/au/database/technologies/related/nosql.html
  - Document
    - Each item is stored as a document (normally BSON or JSON document, but could be XML)
    - Note the variable structure and embedded documents
    -  Column Family (also called Wide Column Store)
      - Key points to a set of multiple column values containing related data arranged by column family
  - Graph - based on a graph structure
    - Unlike the previous three which are aggregation oriented, the graph model views data at a highly non aggregated level
    - Based on graph theory
    - Navigate via relationships (edges) between nodes
    - Examples
      - Neo4j
      - HyperGraphDB
- NoSQL Databases
  - Comparison of NoSQL databases
    - https://hostingdata.co.uk/nosql-database/ currently lists 200+ NoSQL databases, including some outside these four models.
  - Data is distributed on multiple machines via:
    - Sharding
      - One copy of the data spread across multiple machines, or
    - Replication
      - Same data is spread across multiple machines, increased availability and resilience
  - Lots of interesting questions and research around consistency vs availability
- MongoDB
  - Document Database
    - Community edition available for download (not required for FIT9132)
      - https://www.mongodb.com/download-center/community
    - MongoDB Shell
      - https://docs.mongodb.com/manual/tutorial/getting-started/
    - Database
      - show dbs, use dbname, db.dropDatabase(), db (show current db)
      - Contains collections
        - show collections
          - collection contains documents
- Document Structure
  - MongoDB stores data records as BSON documents (binary JSON documents)
  - Document composed of field-values pairs
    - Field names may be enclosed in quotes (allows spaces in name)
    - "groups" field above holds an array of strings
- mongoDB - CRUD: CREATE
  - create collection by inserting documents
    - db.collection.insertOne ( ….. JSON ….. );
    - db.collection.insertMany - insert an array of JSON documents
      - insertMany ([ JSON1, JSON2, …]);
- mongoDB - CRUD: RETRIEVE
  - Documents retrieved by find method on collection
    - db.famous.find ({}); or db.famous.find ({}).pretty()
      - find all
  - Limit output to specified field (project fields) 1 display 0 suppress
- mongoDB - CRUD: UPDATE
  - Update documents via update or updateOne
    - uses $set to assign value
    - updateOne ({query condition},{update to carry out}
    - db.famous.updateOne ( {"_id": 2},{ $set: {"name.first": "Christopher"}})
- mongoDB - CRUD: DELETE
  - Delete a document
    - via db.famous.deleteOne or db.famous.deleteMany
- Generate JSON object from Oracle Select
  - <img width="540" alt="Screen Shot 2022-02-17 at 12 15 54 AM" src="https://user-images.githubusercontent.com/24580756/154308315-de4c4781-8ae5-48f1-b260-6845044e01e7.png">
